:root {
  --bg: #070b09;           /* near-black with green tint */
  --bg-2: #0b120f;
  --surface: #0e1512;      /* card surfaces */
  --elev: #0f1915;         /* elevated surfaces */
  --border: #153226;       /* greenish border */
  --text: #e6ffe8;         /* soft white-green */
  --text-2: #b9e7c5;
  --muted: #6bbf8a;        /* muted green */
  --accent: #00e676;       /* neon green */
  --accent-2: #14f195;     /* secondary neon */
  --danger: #ff4d4d;
  --warning: #ffd166;
  --success: #06d6a0;
  --radius: 16px;
  --radius-sm: 10px;
  --radius-xs: 8px;
  --shadow: 0 10px 30px rgba(0,0,0,.45);
  --ring: 0 0 0 2px rgba(20, 241, 149, 0.25);
}

[data-theme="light"] {
  --bg: #f6fff8;
  --bg-2: #eafff0;
  --surface: #ffffff;
  --elev: #ffffff;
  --border: #cce8d6;
  --text: #0a2415;
  --text-2: #153226;
  --muted: #418a63;
  --accent: #00a95c;
  --accent-2: #09c37e;
  --danger: #d53f3f;
  --warning: #d98f00;
  --success: #0aa36b;
  --shadow: 0 10px 30px rgba(5, 20, 10, .08);
  --ring: 0 0 0 3px rgba(0, 169, 92, 0.22);
}

* { box-sizing: border-box; }
html, body, #app { height: 100%; }
body {
  margin: 0;
  background: radial-gradient(1200px 700px at 15% 10%, rgba(20,241,149,0.08), transparent 60%),
              radial-gradient(900px 600px at 85% 10%, rgba(0,230,118,0.08), transparent 60%),
              linear-gradient(180deg, var(--bg), var(--bg-2));
  color: var(--text);
  font: 14px/1.55 Inter, system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Live matrix background canvas */
#bgMatrix {
  position: fixed;
  inset: 0;
  z-index: -2;
  background: transparent;
  pointer-events: none;
}

/* Subtle scanlines overlay */
body::after {
  content: '';
  position: fixed;
  inset: 0;
  z-index: -1;
  background: repeating-linear-gradient(
    to bottom,
    rgba(0,0,0,0.12) 0px,
    rgba(0,0,0,0.12) 1px,
    transparent 2px,
    transparent 3px
  );
  pointer-events: none;
}

.muted { color: var(--muted); }
.mono { font-family: "JetBrains Mono", ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; }

.only-desktop { display: inline-flex; }

.topbar {
  position: sticky; top: 0; z-index: 50;
  display: grid; grid-template-columns: 1fr minmax(320px, 640px) 1fr;
  align-items: center; gap: 12px; padding: 12px 18px;
  border-bottom: 1px solid var(--border);
  background: color-mix(in oklab, var(--surface) 85%, transparent);
  backdrop-filter: blur(8px);
}
.surface { background: var(--surface); }
.blur { backdrop-filter: blur(8px); }

.topbar-left, .topbar-right { display: flex; align-items: center; gap: 12px; }
.topbar-center { display: flex; justify-content: center; }

.brand {
  display: flex; align-items: center; gap: 10px; text-decoration: none; color: inherit;
}
.brand-mark {
  width: 34px; height: 34px; border-radius: 8px; display:flex; align-items:center; justify-content:center;
  font: 700 14px/1 "JetBrains Mono", monospace;
  background: linear-gradient(135deg, rgba(0,230,118,.18), rgba(20,241,149,.18));
  color: var(--accent); border: 1px solid var(--border); box-shadow: var(--shadow);
}
.brand-text strong { font-weight: 800; }
.brand-text .muted { margin-left: 6px; }

.breadcrumb { display:inline-flex; gap:10px; align-items:center; color: var(--muted); margin-left:8px; }
.breadcrumb .sep { opacity:.7; }

.search {
  display:flex; align-items:center; gap:8px;
  border:1px solid var(--border); border-radius: 999px; padding: 8px 12px;
  background: var(--elev); min-width: 320px; width: 100%;
}
.search .icon { color: var(--accent); }
.search input { border:none; outline:none; background:transparent; color:var(--text); flex:1; min-width: 60px; }
.search .hint { background: rgba(20,241,149,.10); border:1px solid var(--border); padding:2px 6px; border-radius:6px; color: var(--muted); }

.icon-btn, .btn, .input, .chip, .tab, .nav-item {
  transition: box-shadow .2s ease, border-color .2s ease, background .2s ease, color .2s ease, transform .05s ease;
}

.icon-btn {
  border:1px solid var(--border); background: var(--elev); color: var(--text);
  border-radius: 10px; padding: 8px 10px; cursor: pointer; font-family: "JetBrains Mono", monospace;
}
.icon-btn:hover { box-shadow: var(--ring); }

.btn {
  border:1px solid var(--border); background: var(--elev); color: var(--text);
  border-radius: 12px; padding: 10px 14px; cursor:pointer; font-weight: 700; letter-spacing: .02em;
}
.btn:hover { box-shadow: var(--ring); transform: translateY(-1px); }
.btn.strong { background: linear-gradient(135deg, var(--accent), var(--accent-2)); border-color: transparent; color:#00190c; }
.btn.danger { background: #331414; color: #ffdede; border-color: #5a1f1f; }
.btn.warning { background: #2d2a12; color: #ffeab5; border-color: #5b5728; }
.btn.success { background: #0f2a22; color: var(--accent-2); border-color: #1e4a3d; }
.btn.ghost { background: transparent; border-color: var(--border); color: var(--text); }

.input {
  border:1px solid var(--border); background: var(--elev); color: var(--text);
  border-radius: 10px; padding: 10px 12px; outline:none; width:100%;
}
.input.small { padding: 8px 10px; width: auto; min-width: 88px; }

.layout {
  display:grid; grid-template-columns: 280px 1fr; gap: 18px; padding: 18px;
  max-width: 1440px; margin: 0 auto;
}

.sidebar {
  position: sticky; top: 70px; height: calc(100dvh - 90px);
  border:1px solid var(--border); border-radius: var(--radius); padding: 14px;
  display:flex; flex-direction: column; justify-content: space-between;
}
.nav { display:flex; flex-direction: column; gap: 16px; }
.nav-label { color: var(--muted); font-size: 12px; text-transform: lowercase; letter-spacing: .08em; margin: 6px 4px; }
.nav-item {
  text-align:left; border:1px solid var(--border); background: var(--elev);
  color: var(--text); padding: 10px 12px; border-radius: var(--radius-sm); cursor:pointer; font-family:"JetBrains Mono", monospace;
}
.nav-item:hover { box-shadow: var(--ring); }
.nav-item.active { background: linear-gradient(135deg, rgba(20,241,149,.12), rgba(0,230,118,.08)); border-color: rgba(20,241,149,.35); }
.nav-item.danger { background: rgba(255,77,77,.12); border-color: rgba(255,77,77,.35); }

.sidebar-footer { border-top:1px dashed var(--border); padding-top: 10px; color: var(--muted); font-variant-numeric: tabular-nums; }

.content { display:flex; flex-direction: column; gap: 18px; }

.hero {
  border:1px solid var(--border); border-radius: var(--radius);
  padding: 18px; display:flex; gap: 18px; align-items: center; justify-content: space-between;
  background:
    linear-gradient(135deg, rgba(20,241,149,.08), transparent 30%) no-repeat,
    var(--surface);
}
.hero-left h1 { margin: 0 0 6px 0; font-size: 24px; }
.hero .meta { color: var(--muted); }
.hero-stats { display:flex; gap: 14px; margin-top: 10px; flex-wrap: wrap; }
.hero-stats .stat { background: var(--elev); border:1px solid var(--border); padding: 10px 12px; border-radius: 12px; min-width: 88px; text-align: center; }
.stat .value { font-size: 18px; font-weight: 800; color: var(--accent-2); }
.stat .label { color: var(--muted); font-size: 12px; }
.pill-group { display:flex; gap: 8px; align-items:center; flex-wrap: wrap; justify-content:flex-end; }
.pill {
  display:flex; gap:8px; align-items:center; border:1px solid var(--border); background: var(--elev);
  border-radius: 999px; padding: 8px 12px; color: var(--text);
}
.pill input { border:none; outline:none; background: transparent; color: var(--text); min-width: 220px; font-family:"JetBrains Mono", monospace; }

.grid.two-cols { display:grid; grid-template-columns: 1.8fr 1fr; gap: 18px; }
.col { display:flex; flex-direction: column; gap: 18px; }
.col.right .card { position: sticky; top: 90px; }

.card { border:1px solid var(--border); border-radius: var(--radius); padding: 16px; background: var(--surface); box-shadow: var(--shadow); }
.card-head { display:flex; align-items:center; justify-content: space-between; margin-bottom: 8px; }

.player-card { padding: 0; overflow: hidden; }
.player-shell { position: relative; background: #000; }
.player { aspect-ratio: 16 / 9; width: 100%; display: block; }

.player-overlay {
  position: absolute; bottom: 12px; left: 12px; right: 12px;
  background: rgba(7, 11, 9, .65); border:1px solid rgba(20,241,149,.25);
  border-radius: 12px; padding: 10px 12px; display:flex; align-items:center; justify-content: space-between;
  backdrop-filter: blur(4px); opacity: 0; transform: translateY(8px); transition: .2s ease;
}
.player-shell:hover .player-overlay { opacity: 1; transform: translateY(0); }
.mini-info { display:flex; flex-direction: column; gap: 4px; }
.mini-title { font-weight:700; font-size: 13px; color: var(--accent-2); }
.mini-meta { font-size: 12px; color: var(--muted); }
.mini-controls .icon-btn { background: rgba(20,241,149,.08); border-color: rgba(20,241,149,.20); color: var(--accent-2); }

.video-panel { padding: 12px 14px; display:grid; gap: 10px; }
.video-info .title { font-size: 18px; font-weight: 800; margin-bottom: 4px; }
.video-info .meta { color: var(--muted); }
.progress-info {
  display:inline-flex; padding: 6px 10px; border-radius: 8px; border:1px solid rgba(20,241,149,.35);
  color: var(--accent-2); background: rgba(20,241,149,.10); margin-top: 8px; font-weight: 700;
}

.video-controls { display:flex; gap: 12px; align-items:center; flex-wrap: wrap; justify-content: space-between; }
.control-group { display:flex; gap: 10px; align-items:center; }

.tabs { border:1px solid var(--border); border-radius: var(--radius); background: var(--surface); }
.tabbar { display:flex; gap: 8px; padding: 10px; border-bottom:1px solid var(--border); background: var(--elev); border-top-left-radius: var(--radius); border-top-right-radius: var(--radius); }
.tab {
  padding: 8px 12px; border:1px solid var(--border); border-radius: 10px; background: var(--surface); cursor: pointer; font-family:"JetBrains Mono", monospace; text-transform: lowercase;
}
.tab.active { background: linear-gradient(135deg, rgba(20,241,149,.12), rgba(0,230,118,.08)); border-color: rgba(20,241,149,.35); }
.tabpanel { display:none; padding: 14px; }
.tabpanel.active { display:block; }

.overview .bullets { margin: 0; padding-left: 18px; }
.overview-grid { display:grid; grid-template-columns: repeat(3, 1fr); gap: 12px; margin-top: 12px; }
.kpi { background: var(--elev); border:1px solid var(--border); border-radius: var(--radius-sm); padding: 12px; }
.kpi-label { color: var(--muted); text-transform: lowercase; }
.kpi-value { font: 800 20px/1 "JetBrains Mono", monospace; margin-top: 4px; color: var(--accent-2); }

.curriculum-header { display:flex; gap: 12px; align-items:center; justify-content: space-between; margin-bottom: 8px; }
.filters { display:flex; gap: 8px; flex-wrap: wrap; }
.chip {
  padding: 6px 10px; border:1px solid var(--border); border-radius: 999px; background: var(--surface); cursor: pointer; color: var(--text); font-family:"JetBrains Mono", monospace;
}
.chip.active { background: var(--accent-2); color: #002415; border-color: transparent; }

.playlist { display:flex; flex-direction: column; }
.playlist-item {
  display:grid; grid-template-columns: 120px 1fr auto; gap: 12px; align-items: center;
  padding: 10px 12px; border-bottom: 1px solid rgba(21,50,38,.5); cursor: pointer; background: transparent;
}
.playlist-item:hover { background: rgba(20,241,149, .06); }
.playlist-item.active { background: rgba(20,241,149, .12); border-left: 3px solid var(--accent-2); }
.playlist-thumb { width: 120px; aspect-ratio: 16/9; border-radius: 10px; object-fit: cover; border:1px solid var(--border); }
.playlist-body { min-width: 0; }
.lecture-title { font-weight: 700; font-size: 14px; margin-bottom: 4px; color: var(--text); }
.lecture-desc { font-size: 12px; color: var(--muted); line-height: 1.3; display:-webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
.lecture-meta { display:flex; gap: 10px; align-items:center; color: var(--muted); font-size: 12px; margin-top: 6px; }
.progress-bar { width:100%; height: 4px; background: rgba(21,50,38,.8); border-radius: 2px; overflow: hidden; margin-top: 6px; }
.progress-fill { height: 100%; background: linear-gradient(90deg, var(--accent), var(--accent-2)); border-radius: 2px; transition: width .3s ease; }
.playlist-actions { display:flex; gap: 6px; }
.reset-progress { background: #2b1414; color: #ffbdbd; border: 1px solid #5a1f1f; width: 28px; height: 28px; border-radius: 8px; cursor: pointer; font-size: 12px; }

.badge {
  display:inline-flex; align-items:center; padding: 4px 8px; border-radius: 999px; font-size: 11px; border:1px solid var(--border); background: var(--elev); color: var(--text);
}

.note-form { display:flex; gap: 8px; }
.note-list { margin-top: 12px; display:flex; flex-direction: column; gap: 8px; }
.todo-item {
  display:grid; grid-template-columns: 22px 1fr auto; gap: 10px; align-items:center;
  padding: 10px; border:1px solid var(--border); border-radius: 10px; background: var(--elev);
}
.todo-item.done { opacity: .7; }
.todo-text { font-size: 14px; }
.todo-meta { font-size: 11px; color: var(--muted); }
.todo-delete { background: #2b1414; color: #ffbdbd; border: 1px solid #5a1f1f; width: 28px; height: 28px; border-radius: 6px; cursor: pointer; font-size: 12px; }
.todo-checkbox { transform: scale(1.3); accent-color: var(--accent-2); }

.progress-line { width: 100%; height: 8px; background: rgba(21,50,38,.8); border-radius: 6px; overflow: hidden; }
.progress-line-fill { height: 100%; background: linear-gradient(90deg, var(--accent), var(--accent-2)); transition: width .3s ease; }
.progress-meta { display:flex; align-items:center; justify-content: space-between; margin-top: 8px; }
.badges { display:flex; gap: 8px; margin-top: 8px; }

.timer-display { font: 800 32px/1 "JetBrains Mono", monospace; text-align: center; color: var(--accent-2); margin: 8px 0; }
.timer-controls { display:flex; gap: 8px; justify-content: center; }
.timer-presets { display:flex; gap: 8px; justify-content:center; flex-wrap: wrap; margin-top: 8px; }

.mini-stats { list-style: none; padding: 0; margin: 0; display:grid; gap: 8px; }
.mini-stats li { display:flex; align-items:center; justify-content: space-between; padding: 8px 10px; background: var(--elev); border:1px solid var(--border); border-radius: 10px; }
.mini-stats li strong { font-family:"JetBrains Mono", monospace; color: var(--accent-2); }

.modal {
  border:1px solid var(--border); background: var(--surface); color: var(--text);
  border-radius: 16px; width: min(720px, 96vw); box-shadow: var(--shadow); padding: 0;
}
.modal::backdrop { background: rgba(0,0,0,.55); backdrop-filter: blur(2px); }
.modal-head, .modal-foot { padding: 14px; border-bottom:1px solid var(--border); display:flex; align-items:center; justify-content: space-between; }
.modal-foot { border-top:1px solid var(--border); border-bottom: none; }
.modal-body { padding: 14px; display:grid; gap: 12px; }
.label { display:block; color: var(--muted); margin-bottom: 6px; }

.toast { position: fixed; top: 14px; right: 14px; display: grid; gap: 8px; z-index: 100; }
.toast .note {
  background: var(--surface); border:1px solid var(--border); padding: 10px 12px; border-left: 4px solid var(--accent);
  border-radius: 10px; min-width: 260px; box-shadow: var(--shadow); color: var(--text);
}
.toast .note.success { border-left-color: var(--success); }
.toast .note.warning { border-left-color: var(--warning); }
.toast .note.error { border-left-color: var(--danger); }

@media (max-width: 1200px) {
  .layout { grid-template-columns: 1fr; }
  .col.right .card { position: static; }
}
@media (max-width: 880px) {
  .grid.two-cols { grid-template-columns: 1fr; }
}
@media (max-width: 640px) {
  .hero { flex-direction: column; align-items: stretch; }
  .pill input { min-width: 120px; }
  .playlist-item { grid-template-columns: 100px 1fr auto; }
}
